/*
 * viewmatrix.js v0.0.1 (2018-01-18 23:28:44)
 * @author comOn Group
 */

require=function e(t,i,n){function s(o,l){if(!i[o]){if(!t[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return s(i||e)},c,c.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,i){var n;(n=window).ViewMatrix=e("./src/class"),n.ViewMatrixTouch=e("./src/touch")},{"./src/class":2,"./src/touch":3}],2:[function(e,t,i){"use strict";var n=e("./utils"),s=e("emitter");t.exports=function(e,t){s(this),this.defaults={adjacentCount:1,childSelector:"*",classPrefix:"vm-",classSuffixes:{element:"element",infinite:"infinite",child:"child",current:"current",behind:"behind",ahead:"ahead",beyond:"beyond"},createTrack:!0,currentIndex:0,handleZIndex:!0,infinite:!1,parentSelector:null,wrapIndex:!0},this.options=n.mergeObjects(this.defaults,n.isType(t,"object",{}));var i={},r=n.isType(this.options.classPrefix,"string",this.defaults.classPrefix),o=n.isType(this.options.classSuffixes,"object",this.defaults.classSuffixes);for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=r+o[l]);return this.element=null,this.children=null,this.total=0,this.current=n.isType(this.options.currentIndex,"number",0),this.destroy=function(){var e;if(this.element&&n.removeClassFromElement(this.element,[i.element,i.infinite]),this.children&&this.children.length>0)for(var t=0;t<this.children.length;t++)e=this.children[t],n.removeClassFromElement(e,[i.child,i.current,i.beyond,i.behind,i.ahead]),n.setElementStyle(e,"z-index",null);this.emit("destroyed",this.element,this.children),this.element=null,this.children=null},this.refresh=function(e,t){var s;if(this.destroy(),"string"==typeof(e=null!=e?e:this.options.parentSelector)?this.element=document.querySelector(e)||null:e instanceof Element&&(this.element=e),!this.element)throw new Error("No valid selector provided to ViewMatrix");this.options.parentSelector=e,this.options.childSelector=n.isType(t,"string",this.options.childSelector),this.children=n.findChildrenInElement(this.element,this.options.childSelector),this.total=this.children.length,this.current=this.wrap(this.current);for(var r=0;r<this.children.length;r++)s=this.children[r],n.addClassToElement(s,i.child);this.slide(this.current),n.addClassToElement(this.element,i.element),n.toggleClassInElement(this.element,i.infinite,this.options.infinite),this.emit("initialized",this.element,this.children)},this.slide=function(e){if(!this.children||0===this.children.length)return null;var t,s,r,o,l;e=this.wrap(e);var a=Math.max(1,this.options.adjacentCount),h=a,c=this.children.length-a,u=e<a,d=e>=c;this.emit("beforeslide",this.current,e,this.total);for(var p=0;p<this.children.length;p++)t=this.children[p],s=Math.abs(e-p),p===e?(n.removeClassFromElement(t,[i.ahead,i.behind,i.beyond]),n.addClassToElement(t,i.current)):(r=p>e,o=p<e,this.options.infinite&&(u&&p>=c?(s=Math.abs(e-(p-this.children.length)),r=!1,o=!0):d&&p<h&&(s=Math.abs(e-(p+this.children.length)),r=!0,o=!1)),l=s>a,n.removeClassFromElement(t,i.current),n.toggleClassInElement(t,i.beyond,l),n.toggleClassInElement(t,i.behind,o),n.toggleClassInElement(t,i.ahead,r)),this.options.handleZIndex&&n.setElementStyle(t,"z-index",this.children.length-s);return this.emit("slide",this.current,e,this.total),this.current=e,this.children[e]},this.inc=function(e){return this.slide(this.current+n.isType(e,"number",0))},this.wrap=function(e){var t=this.total-1;return this.options.wrapIndex?n.wrapNumber(e,0,t):n.clampNumber(e,0,t)},this.refresh(e,this.options.childSelector),this}},{"./utils":4,emitter:"emitter"}],3:[function(e,t,i){var n=e("./utils");function s(e){return e.touches?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.pageX,y:e.pageY}}t.exports=function(e,t){var i=this;this.defaults={preventDefault:!1,swipe:!0,swipeVertical:!1,swipeTolerance:30},this.options=n.mergeObjects(this.defaults,n.isType(t,"object",{})),e=n.giveInstanceOrDie(e);var r=null,o=null,l=null,a=null;function h(t){!1!==t&&e.emit("touchcancel",a,o),r=null,o=null,a=null}function c(t){var n,l,h=s(t);!r&&(n=e.element,l=h,n&&l.x>=n.offsetLeft&&l.x<=n.offsetLeft+n.offsetWidth&&l.y>=n.offsetTop&&l.y<=n.offsetTop+n.offsetHeight)&&(r=h,o=h,a=e.element,i.options.preventDefault&&t.preventDefault(),e.emit("touchstart",a,h))}function u(t){var n,c,u,d,p,f;r&&(o=s(t),c=o,l={x:(n=r).x-c.x,y:n.y-c.y},e.emit("touchmove",a,l,h),i.options.swipe&&(u=l,d=Math.abs(u.x),p=Math.abs(u.y),f=0,d>p&&!i.options.swipeVertical?f=u.x:d<p&&i.options.swipeVertical&&(f=u.y),f>i.options.swipeTolerance?(e.emit("swipenext",a,u),e.inc(1),1):f<-i.options.swipeTolerance&&(e.emit("swipeprev",a,u),e.inc(-1),1))&&h(!1))}function d(t){r&&(e.emit("touchend",a,o),h(!1))}this.bindEvents=function(){h(!1),document.addEventListener("touchstart",c,{passive:!1}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d,{passive:!1}),document.addEventListener("mousedown",c,{passive:!1}),document.addEventListener("mousemove",u,{passive:!1}),document.addEventListener("mouseup",d,{passive:!1})},this.unbindEvents=function(){h(!1),document.removeEventListener("touchstart",c,{passive:!1}),document.removeEventListener("touchmove",u,{passive:!1}),document.removeEventListener("touchend",d,{passive:!1}),document.removeEventListener("mousedown",c,{passive:!1}),document.removeEventListener("mousemove",u,{passive:!1}),document.removeEventListener("mouseup",d,{passive:!1})},e.on("initialize",i.bindEvents),e.on("destroy",i.unbindEvents),i.bindEvents()}},{"./utils":4}],4:[function(e,t,i){"use strict";var n={addClassToElement:function(e,t){for(var i=this.sanitizeString(t).split(" "),n=e.className.trim(),s=0;s<i.length;s++)-1===n.indexOf(i[s])&&(n=n+" "+i[s]);e.className=this.sanitizeString(n)},clampNumber:function(e,t,i){return Math.max(t,Math.min(i,e))},findChildrenInElement:function(e,t){return this.isType(t,"string")?e.querySelectorAll(":scope > "+t):e.querySelectorAll("*")},giveInstanceOrDie:function(e){if(!(e instanceof ViewMatrix))throw new TypeError("Method was given an invalid ViewMatrix instance");return e},isType:function(e,t,i){return i=void 0!==i?i:null,typeof e===t?e:i},mergeObjects:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},removeClassFromElement:function(e,t){for(var i=t instanceof Array?t:this.sanitizeString(t).split(" "),n=e.className.trim(),s=0;s<i.length;s++)-1!==n.indexOf(i[s])&&(n=n.replace(i[s],""));e.className=this.sanitizeString(n),0===e.className.length&&e.removeAttribute("class")},sanitizeString:function(e){return this.isType(e,"string","").trim().replace(/\s\s+/g," ")},setElementStyle:function(e,t,i){var n=this.sanitizeString(e.getAttribute("style")||"");return null!=i&&-1===n.indexOf(t+":")||(n=n.replace(new RegExp(t+":[^;]+;","g"),"")),null!=i&&(n+=t+":"+i+";"),n.length>0?e.setAttribute("style",this.sanitizeString(n)):e.removeAttribute("style"),n},toggleClassInElement:function(e,t,i){return i?this.addClassToElement(e,t):this.removeClassFromElement(e,t),i},wrapNumber:function(e,t,i){e=this.isType(e,"number",0),t=this.isType(t,"number",0);var n=(i=Math.max(t,this.isType(i,"number",0)))+1-t;return t+((e-t)%n+n)%n}};t.exports=n},{}],emitter:[function(e,t,i){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}void 0!==t&&(t.exports=n),n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<n.length;s++)if((i=n[s])===t||i.fn===t){n.splice(s,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var n=0,s=(i=i.slice(0)).length;n<s;++n)i[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}]},{},[1]);
//# sourceMappingURL=viewmatrix.min.js.map