/*!
 * name: viewmatrix
 * version: 0.2.1
 * hash: 55c486d81a6895c9af65
 */!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function(){return function(){}}();function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i}var o,r=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=t.call(this)||this;return n.options={},n.defaults={cancelOnSlide:!0,classAlias:"autoplaying",direction:1,instant:!0,interval:3e3},n.cancelAutoplay=!1,n.intervalId=0,n.handleAutoplay=function(){n.cancelAutoplay=!1,n.instance.inc(n.options.direction)},n.handleSlideChange=function(){n.cancelAutoplay&&!1!==n.options.cancelOnSlide&&n.pause(),n.cancelAutoplay=!0},s(n.options,n.defaults,e),n}return r(e,t),e.prototype.onInit=function(){this.instance.on("slide:after",this.handleSlideChange),!0===this.options.instant&&this.play()},e.prototype.onDestroy=function(){this.instance.off("slide:after",this.handleSlideChange),this.pause(!1)},e.prototype.play=function(t){this.pause(!1),this.intervalId=window.setInterval(this.handleAutoplay,this.options.interval),this.options.classAlias&&this.instance.toggleClass(this.options.classAlias,!0),!1!==t&&this.instance.emit("autoplay:start")},e.prototype.pause=function(t){0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=0,this.options.classAlias&&this.instance.toggleClass(this.options.classAlias,!1),!1!==t&&this.instance.emit("autoplay:pause"))},e}(i);function l(t){return(""+t).trim().replace(/\s\s+/g," ")}function c(t,e){if(t instanceof HTMLElement){for(var n=l(e).split(" "),i=t.className.trim(),s=0,o=n;s<o.length;s++){var r=o[s];-1===i.indexOf(r)&&(i=i+" "+r)}t.className=l(i)}}function h(t,e){if(t instanceof HTMLElement){for(var n=e instanceof Array?e:l(e).split(" "),i=t.className.trim(),s=0,o=n;s<o.length;s++){var r=o[s];-1!==i.indexOf(r)&&(i=i.replace(r,""))}t.className=l(i),0===t.className.length&&t.removeAttribute("class")}}function u(t,e,n){var i=l(t.getAttribute("style")||"");return null!=n&&-1===i.indexOf(e+":")||(i=i.replace(new RegExp(e+":[^;]+;","g"),"")),null!=n&&(i+=e+":"+n+";"),i.length>0?t.setAttribute("style",l(i)):t.removeAttribute("style"),i}function p(t,e,n){return n?c(t,e):h(t,e),n}var f=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.getFromEvent=function(e,n){void 0===n&&(n=0);var i=new t;return e instanceof TouchEvent&&e.touches?(i.x=e.touches[n].pageX,i.y=e.touches[n].pageY):e instanceof MouseEvent&&(i.x=e.pageX,i.y=e.pageY),i},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t}(),d=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(t){function e(e){var n=t.call(this)||this;return n.options={},n.defaults={classAlias:"touching",eventTarget:document,preventDefault:!0,tolerance:30,vertical:!1},n.eventTarget=void 0,n.touchStart=void 0,n.touchLast=void 0,n.touchDelta=void 0,n.target=void 0,n.cancelTouch=function(t){n.options.classAlias&&n.instance.toggleClass(n.options.classAlias,!1),!1!==t&&n.instance.emit("touch:cancel",n.target,n.touchLast),n.touchStart=void 0,n.touchLast=void 0,n.target=void 0},n.handleTouchStart=function(t){var e=f.getFromEvent(t);!n.touchStart&&function(t,e){return t&&e.x>=t.offsetLeft&&e.x<=t.offsetLeft+t.offsetWidth&&e.y>=t.offsetTop&&e.y<=t.offsetTop+t.offsetHeight}(n.instance.element,e)&&(n.touchStart=e,n.touchLast=e,n.target=n.instance.element,n.options.preventDefault&&t.cancelable&&t.preventDefault(),n.options.classAlias&&n.instance.toggleClass(n.options.classAlias,!0),n.instance.emit("touch:start",n.target,e))},n.handleTouchMove=function(t){if(n.touchStart){n.touchLast=f.getFromEvent(t),n.touchDelta=n.touchStart.clone().sub(n.touchLast),n.instance.emit("touch:move",n.target,n.touchDelta,n.cancelTouch);var e=Math.abs(n.touchDelta.x),i=Math.abs(n.touchDelta.y),s=0;e>i&&!n.options.vertical?s=n.touchDelta.x:e<i&&n.options.vertical&&(s=n.touchDelta.y),s>n.options.tolerance?(n.instance.emit("swipe:next",n.target,n.touchDelta),n.instance.inc(1),n.cancelTouch(!1)):s<-n.options.tolerance&&(n.instance.emit("swipe:prev",n.target,n.touchDelta),n.instance.inc(-1),n.cancelTouch(!1))}},n.handleTouchEnd=function(t){n.touchStart&&(n.instance.emit("touch:end",n.target,n.touchLast),n.cancelTouch(!1))},s(n.options,n.defaults,e),n}return d(e,t),e.prototype.onInit=function(){this.cancelTouch(!1),this.eventTarget=this.options.eventTarget,this.eventTarget&&(this.eventTarget.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),this.eventTarget.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.eventTarget.addEventListener("touchend",this.handleTouchEnd,{passive:!1}),this.eventTarget.addEventListener("mousedown",this.handleTouchStart,{passive:!1}),this.eventTarget.addEventListener("mousemove",this.handleTouchMove,{passive:!1}),this.eventTarget.addEventListener("mouseup",this.handleTouchEnd,{passive:!1}))},e.prototype.onDestroy=function(){this.cancelTouch(!1),this.eventTarget&&(this.eventTarget.removeEventListener("touchstart",this.handleTouchStart),this.eventTarget.removeEventListener("touchmove",this.handleTouchMove),this.eventTarget.removeEventListener("touchend",this.handleTouchEnd),this.eventTarget.removeEventListener("mousedown",this.handleTouchStart),this.eventTarget.removeEventListener("mousemove",this.handleTouchMove),this.eventTarget.removeEventListener("mouseup",this.handleTouchEnd),this.eventTarget=void 0)},e}(i),y=function(){function t(){this.callbacks={}}return t.prototype.on=function(t,e){if("function"!=typeof e)return this;var n="$"+t;return(this.callbacks[n]=this.callbacks[n]||[]).push(e),this},t.prototype.once=function(t,e){if("function"!=typeof e)return this;function n(){this.off(t,n),e.apply(this,arguments)}return n.callback=e,this.on(t,n),this},t.prototype.off=function(t,e){if(0===arguments.length)return this.callbacks={},this;var n="$"+t,i=this.callbacks[n];if(!i)return this;if(1===arguments.length)return delete this.callbacks[n],this;var s=i.indexOf(e);return-1!==s&&i[s]===e&&i.splice(s,1),0===i.length&&delete this.callbacks[n],this},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.callbacks["$"+t];if(i&&i.length>0)for(var s=0,o=i=i.slice(0);s<o.length;s++){o[s].apply(this,e)}return this},t.prototype.listeners=function(t){return this.callbacks["$"+t]||[]},t.prototype.hasListeners=function(t){return!!this.listeners(t).length},t}();var g=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(t){function e(e,n,i){var o=t.call(this)||this;return o.children=null,o.plugins=[],o.defaults={startingIndex:0,childrenSelector:"*",classAliases:{element:"element",infinite:"infinite",child:"child",current:"current",behind:"behind",ahead:"ahead",beyond:"beyond"},classPrefix:"vm-",adjacentCount:1,handleZIndex:!0,infinite:!1,wrap:!0},o.classAliases={},o.currentIndex=0,o.options=s({},o.defaults,n),i&&(i instanceof Array?o.plugins=Array.prototype.slice.call(i,1):"function"==typeof i&&(o.plugins=i({AutoplayPlugin:a,TouchSwipePlugin:v}))),o.initialize(e,o.options.childrenSelector),o}return g(e,t),e.prototype.initialize=function(t,e){if(this.destroy(),"string"==typeof(t=null!=t?t:null)?this.element=document.querySelector(t)||null:t instanceof HTMLElement&&(this.element=t),!this.element)throw new Error("No valid selector provided to ViewMatrix instance");var n,i;"string"==typeof e&&(this.options.childrenSelector=e),this.children=(n=this.element,"string"==typeof(i=e)?[].slice.call(n.querySelectorAll(":scope > "+i)):n.children),this.currentIndex=this.wrapIndex(this.currentIndex),this.prepareClassNames(this.options.classPrefix,this.options.classAliases);for(var s=0,o=this.children;s<o.length;s++){c(o[s],this.classAliases.child)}c(this.element,this.classAliases.element),p(this.element,this.classAliases.infinite,this.options.infinite),this.initializePlugins(),this.slide(this.currentIndex),this.emit("init",this.element,this.children)},e.prototype.destroy=function(){if(this.destroyPlugins(),this.element&&h(this.element,[this.classAliases.element,this.classAliases.infinite]),this.children&&this.children.length>0)for(var t=0,e=this.children;t<e.length;t++){var n=e[t];h(n,[this.classAliases.child,this.classAliases.current,this.classAliases.beyond,this.classAliases.behind,this.classAliases.ahead]),u(n,"z-index",null)}this.emit("destroy",this.element,this.children),this.element=null,this.children=null},e.prototype.slide=function(t){if(!this.children||0===this.children.length)return null;t=this.wrapIndex(t);var e=this.children.length,n=Math.max(1,this.options.adjacentCount),i=Math.floor((e-1)/2),s=i+(e%2==0?1:0);this.emit("slide:before",this.currentIndex,t,e);for(var o=0;o<e;o++){var r=this.children[o],a=o-t;if(this.options.infinite&&(a>i?a-=e:a<-i&&(a+=e)),o===t)h(r,[this.classAliases.ahead,this.classAliases.behind,this.classAliases.beyond]),c(r,this.classAliases.current);else{var l=a>0,f=a<0,d=Math.abs(a)>n;h(r,this.classAliases.current),p(r,this.classAliases.beyond,d),p(r,this.classAliases.behind,f),p(r,this.classAliases.ahead,l)}this.options.handleZIndex&&u(r,"z-index",s-Math.abs(a))}return this.emit("slide:after",this.currentIndex,t,e),this.currentIndex=t,this.children[t]},e.prototype.inc=function(t){return this.slide(this.currentIndex+t)},e.prototype.toggleClass=function(t,e){this.element&&p(this.element,this.options.classPrefix+t,e)},e.prototype.prepareClassNames=function(t,e){for(var n in void 0===t&&(t=this.options.classPrefix),void 0===e&&(e=this.options.classAliases),e)Object.prototype.hasOwnProperty.call(e,n)&&(this.classAliases[n]=t+e[n])},e.prototype.wrapIndex=function(t){var e=this.children.length-1;return this.options.wrap?function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0);var i=(n=Math.max(e,n))+1-e;return e+((t-e)%i+i)%i}(t,0,e):function(t,e,n){return Math.max(e,Math.min(n,t))}(t,0,e)},e.prototype.initializePlugins=function(){for(var t=0,e=this.plugins;t<e.length;t++){var n=e[t];n&&(n.instance=this,"function"==typeof n.onInit&&n.onInit())}},e.prototype.destroyPlugins=function(){for(var t=0,e=this.plugins;t<e.length;t++){var n=e[t];n&&n.instance&&("function"==typeof n.onDestroy&&n.onDestroy(),n.instance=null)}},e}(y);n.d(e,"ViewMatrix",function(){return m}),n.d(e,"AutoplayPlugin",function(){return a}),n.d(e,"TouchSwipePlugin",function(){return v}),n.d(e,"Emitter",function(){return y}),window.ViewMatrix=m}]);
//# sourceMappingURL=viewmatrix.min.js.map