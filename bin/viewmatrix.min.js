/*
 * viewmatrix.js v0.0.2 (2018-03-22 17:20:35)
 * @author comOn Group
 */

require=function e(t,n,i){function s(o,l){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return s(n||e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,n){var i;(i=window).ViewMatrix=e("./src/class"),i.ViewMatrix.Autoplay=e("./src/module.autoplay"),i.ViewMatrix.Touch=e("./src/module.touch")},{"./src/class":2,"./src/module.autoplay":3,"./src/module.touch":4}],2:[function(e,t,n){"use strict";var i=e("./utils"),s=e("emitter");t.exports=function(e,t){s(this),this.defaults={adjacentCount:1,childSelector:"*",classAliases:{element:"element",infinite:"infinite",child:"child",current:"current",behind:"behind",ahead:"ahead",beyond:"beyond"},classPrefix:"vm-",createTrack:!0,currentIndex:0,handleZIndex:!0,infinite:!1,parentSelector:null,wrapIndex:!0},this.options=i.prepareInstanceOptions(this.defaults,t);var n={},r=i.isType(this.options.classPrefix,"string",this.defaults.classPrefix),o=i.isType(this.options.classAliases,"object",this.defaults.classAliases);for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(n[l]=r+o[l]);return this.element=null,this.children=null,this.total=0,this.current=i.isType(this.options.currentIndex,"number",0),this.destroy=function(){var e;if(this.element&&i.removeClassFromElement(this.element,[n.element,n.infinite]),this.children&&this.children.length>0)for(var t=0;t<this.children.length;t++)e=this.children[t],i.removeClassFromElement(e,[n.child,n.current,n.beyond,n.behind,n.ahead]),i.setElementStyle(e,"z-index",null);this.emit("destroy",this.element,this.children),this.element=null,this.children=null},this.refresh=function(e,t){var s;if(this.destroy(),"string"==typeof(e=null!=e?e:this.options.parentSelector)?this.element=document.querySelector(e)||null:e instanceof Element&&(this.element=e),!this.element)throw new Error("No valid selector provided to ViewMatrix");this.options.parentSelector=e,this.options.childSelector=i.isType(t,"string",this.options.childSelector),this.children=i.findChildrenInElement(this.element,this.options.childSelector),this.total=this.children.length,this.current=this.wrap(this.current);for(var r=0;r<this.children.length;r++)s=this.children[r],i.addClassToElement(s,n.child);this.slide(this.current),i.addClassToElement(this.element,n.element),i.toggleClassInElement(this.element,n.infinite,this.options.infinite),this.emit("initialize",this.element,this.children)},this.slide=function(e){if(!this.children||0===this.children.length)return null;var t,s,r,o,l;e=this.wrap(e);var a=Math.max(1,this.options.adjacentCount),c=Math.floor((this.children.length-1)/2),h=c+(this.children.length%2==0?1:0);this.emit("slide:before",this.current,e,this.total);for(var u=0;u<this.children.length;u++)t=this.children[u],s=u-e,this.options.infinite&&(s>c?s-=this.children.length:s<-c&&(s+=this.children.length)),u===e?(i.removeClassFromElement(t,[n.ahead,n.behind,n.beyond]),i.addClassToElement(t,n.current)):(r=s>0,o=s<0,l=Math.abs(s)>a,i.removeClassFromElement(t,n.current),i.toggleClassInElement(t,n.beyond,l),i.toggleClassInElement(t,n.behind,o),i.toggleClassInElement(t,n.ahead,r)),this.options.handleZIndex&&i.setElementStyle(t,"z-index",h-Math.abs(s));return this.emit("slide",this.current,e,this.total),this.current=e,this.children[e]},this.inc=function(e){return this.slide(this.current+i.isType(e,"number",0))},this.toggle=function(e,t){this.element&&i.toggleClassInElement(this.element,r+e,t)},this.wrap=function(e){var t=this.total-1;return this.options.wrapIndex?i.wrapNumber(e,0,t):i.clampNumber(e,0,t)},this.refresh(e,this.options.childSelector),this}},{"./utils":5,emitter:"emitter"}],3:[function(e,t,n){var i=e("./utils");t.exports=function(e,t){var n=this;this.defaults={cancelOnSlide:!0,classAlias:"autoplaying",direction:1,instant:!0,interval:3},this.options=i.prepareInstanceOptions(this.defaults,t),e=i.giveInstanceOrDie(e);var s=null,r=!1,o=i.isType(n.options.classAlias,"string",!1);function l(){r=!0,e.inc(n.options.direction)}function a(){r||!1===n.options.cancelOnSlide||n.pause(),r=!1}this.play=function(t){n.pause(!1),s=setInterval(l,1e3*i.isType(n.options.interval,"number",3)),!1!==o&&e.toggle(o,!0),!1!==t&&e.emit("autoplay:start")},this.pause=function(t){null!=s&&(clearInterval(s),s=null,n.options.classAlias&&e.toggle(o,!1),!1!==t&&e.emit("autoplay:pause"))},this.bindEvents=function(){e.on("slide",a)},this.unbindEvents=function(){e.off("slide",a),n.stop(!1)},e.on("initialize",n.bindEvents),e.on("destroy",n.unbindEvents),n.bindEvents(),!0===n.options.instant&&n.play()}},{"./utils":5}],4:[function(e,t,n){var i=e("./utils");function s(e){return e.touches?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.pageX,y:e.pageY}}t.exports=function(e,t){var n=this;this.defaults={classAlias:"touching",preventDefault:!1,swipe:!1,swipeVertical:!1,swipeTolerance:30},this.options=i.prepareInstanceOptions(this.defaults,t),e=i.giveInstanceOrDie(e);var r=null,o=null,l=null,a=null,c=i.isType(n.options.classAlias,"string",!1);function h(t){!1!==c&&e.toggle(c,!1),!1!==t&&e.emit("touch:cancel",a,o),r=null,o=null,a=null}function u(t){var i,l,h=s(t);!r&&(i=e.element,l=h,i&&l.x>=i.offsetLeft&&l.x<=i.offsetLeft+i.offsetWidth&&l.y>=i.offsetTop&&l.y<=i.offsetTop+i.offsetHeight)&&(r=h,o=h,a=e.element,n.options.preventDefault&&t.preventDefault(),!1!==c&&e.toggle(c,!0),e.emit("touch:start",a,h))}function p(t){var i,c,u,p,d,f;r&&(o=s(t),c=o,l={x:(i=r).x-c.x,y:i.y-c.y},e.emit("touch:move",a,l,h),n.options.swipe&&(u=l,p=Math.abs(u.x),d=Math.abs(u.y),f=0,p>d&&!n.options.swipeVertical?f=u.x:p<d&&n.options.swipeVertical&&(f=u.y),f>n.options.swipeTolerance?(e.emit("swipe:next",a,u),e.inc(1),1):f<-n.options.swipeTolerance&&(e.emit("swipe:prev",a,u),e.inc(-1),1))&&h(!1))}function d(t){r&&(e.emit("touch:end",a,o),h(!1))}this.bindEvents=function(){h(!1),document.addEventListener("touchstart",u,{passive:!1}),document.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("touchend",d,{passive:!1}),document.addEventListener("mousedown",u,{passive:!1}),document.addEventListener("mousemove",p,{passive:!1}),document.addEventListener("mouseup",d,{passive:!1})},this.unbindEvents=function(){h(!1),document.removeEventListener("touchstart",u,{passive:!1}),document.removeEventListener("touchmove",p,{passive:!1}),document.removeEventListener("touchend",d,{passive:!1}),document.removeEventListener("mousedown",u,{passive:!1}),document.removeEventListener("mousemove",p,{passive:!1}),document.removeEventListener("mouseup",d,{passive:!1})},e.on("initialize",n.bindEvents),e.on("destroy",n.unbindEvents),n.bindEvents()}},{"./utils":5}],5:[function(e,t,n){"use strict";var i={addClassToElement:function(e,t){if(e instanceof Element){for(var n=this.sanitizeString(t).split(" "),i=e.className.trim(),s=0;s<n.length;s++)-1===i.indexOf(n[s])&&(i=i+" "+n[s]);e.className=this.sanitizeString(i)}},clampNumber:function(e,t,n){return Math.max(t,Math.min(n,e))},findChildrenInElement:function(e,t){return this.isType(t,"string")?e.querySelectorAll(":scope > "+t):e.querySelectorAll("*")},giveInstanceOrDie:function(e){if(!(e instanceof ViewMatrix))throw new TypeError("Method was given an invalid ViewMatrix instance");return e},isType:function(e,t,n){return n=void 0!==n?n:null,typeof e===t?e:n},mergeObjects:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},prepareInstanceOptions:function(e,t){return this.mergeObjects({},this.isType(e,"object",{}),this.isType(t,"object",{}))},removeClassFromElement:function(e,t){if(e instanceof Element){for(var n=t instanceof Array?t:this.sanitizeString(t).split(" "),i=e.className.trim(),s=0;s<n.length;s++)-1!==i.indexOf(n[s])&&(i=i.replace(n[s],""));e.className=this.sanitizeString(i),0===e.className.length&&e.removeAttribute("class")}},sanitizeString:function(e){return this.isType(e,"string","").trim().replace(/\s\s+/g," ")},setElementStyle:function(e,t,n){var i=this.sanitizeString(e.getAttribute("style")||"");return null!=n&&-1===i.indexOf(t+":")||(i=i.replace(new RegExp(t+":[^;]+;","g"),"")),null!=n&&(i+=t+":"+n+";"),i.length>0?e.setAttribute("style",this.sanitizeString(i)):e.removeAttribute("style"),i},toggleClassInElement:function(e,t,n){return n?this.addClassToElement(e,t):this.removeClassFromElement(e,t),n},wrapNumber:function(e,t,n){e=this.isType(e,"number",0),t=this.isType(t,"number",0);var i=(n=Math.max(t,this.isType(n,"number",0)))+1-t;return t+((e-t)%i+i)%i}};t.exports=i},{}],emitter:[function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}void 0!==t&&(t.exports=i),i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<i.length;s++)if((n=i[s])===t||n.fn===t){i.splice(s,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,s=(n=n.slice(0)).length;i<s;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}]},{},[1]);
//# sourceMappingURL=viewmatrix.min.js.map