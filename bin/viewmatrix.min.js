!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function(){function t(){this.callbacks={}}return t.prototype.on=function(t,e){if("function"!=typeof e)return this;var n="$"+t;return(this.callbacks[n]=this.callbacks[n]||[]).push(e),this},t.prototype.once=function(t,e){if("function"!=typeof e)return this;function n(){this.off(t,n),e.apply(this,arguments)}return n.callback=e,this.on(t,n),this},t.prototype.off=function(t,e){if(0===arguments.length)return this.callbacks={},this;var n="$"+t,i=this.callbacks[n];if(!i)return this;if(1===arguments.length)return delete this.callbacks[n],this;var s=i.indexOf(e);return-1!==s&&i[s]===e&&i.splice(s,1),0===i.length&&delete this.callbacks[n],this},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.callbacks["$"+t];if(i&&i.length>0)for(var s=0,o=i=i.slice(0);s<o.length;s++){o[s].apply(this,e)}return this},t.prototype.listeners=function(t){return this.callbacks["$"+t]||[]},t.prototype.hasListeners=function(t){return!!this.listeners(t).length},t}();function s(t){return(""+t).trim().replace(/\s\s+/g," ")}function o(t,e){if(t instanceof HTMLElement){for(var n=s(e).split(" "),i=t.className.trim(),o=0,r=n;o<r.length;o++){var a=r[o];-1===i.indexOf(a)&&(i=i+" "+a)}t.className=s(i)}}function r(t,e){if(t instanceof HTMLElement){for(var n=e instanceof Array?e:s(e).split(" "),i=t.className.trim(),o=0,r=n;o<r.length;o++){var a=r[o];-1!==i.indexOf(a)&&(i=i.replace(a,""))}t.className=s(i),0===t.className.length&&t.removeAttribute("class")}}function a(t,e,n){var i=s(t.getAttribute("style")||"");return null!=n&&-1===i.indexOf(e+":")||(i=i.replace(new RegExp(e+":[^;]+;","g"),"")),null!=n&&(i+=e+":"+n+";"),i.length>0?t.setAttribute("style",s(i)):t.removeAttribute("style"),i}function c(t,e,n){return n?o(t,e):r(t,e),n}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i}var h,u=(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e,n){var i=t.call(this)||this;return i.children=null,i.defaults={startingIndex:0,childrenSelector:"*",classAliases:{element:"element",infinite:"infinite",child:"child",current:"current",behind:"behind",ahead:"ahead",beyond:"beyond"},classPrefix:"vm-",adjacentCount:1,handleZIndex:!0,infinite:!1,wrap:!0},i.classAliases={},i.currentIndex=0,i.options=l({},i.defaults,n),i.refresh(e,i.options.childrenSelector),i}return u(e,t),e.prototype.destroy=function(){if(this.element&&r(this.element,[this.classAliases.element,this.classAliases.infinite]),this.children&&this.children.length>0)for(var t=0,e=this.children;t<e.length;t++){var n=e[t];r(n,[this.classAliases.child,this.classAliases.current,this.classAliases.beyond,this.classAliases.behind,this.classAliases.ahead]),a(n,"z-index",null)}this.emit("destroy",this.element,this.children),this.element=null,this.children=null},e.prototype.refresh=function(t,e){if(this.destroy(),"string"==typeof(t=null!=t?t:null)?this.element=document.querySelector(t)||null:t instanceof HTMLElement&&(this.element=t),!this.element)throw new Error("No valid selector provided to ViewMatrix instance");var n,i;"string"==typeof e&&(this.options.childrenSelector=e),this.children=(n=this.element,"string"==typeof(i=e)?[].slice.call(n.querySelectorAll(":scope > "+i)):n.children),this.currentIndex=this.wrapIndex(this.currentIndex),this.prepareClassNames(this.options.classPrefix,this.options.classAliases);for(var s=0,r=this.children;s<r.length;s++){o(r[s],this.classAliases.child)}this.slide(this.currentIndex),o(this.element,this.classAliases.element),c(this.element,this.classAliases.infinite,this.options.infinite),this.emit("init",this.element,this.children)},e.prototype.slide=function(t){if(!this.children||0===this.children.length)return null;t=this.wrapIndex(t);var e=this.children.length,n=Math.max(1,this.options.adjacentCount),i=Math.floor((e-1)/2),s=i+(e%2==0?1:0);this.emit("slide:before",this.currentIndex,t,e);for(var l=0;l<e;l++){var h=this.children[l],u=l-t;if(this.options.infinite&&(u>i?u-=e:u<-i&&(u+=e)),l===t)r(h,[this.classAliases.ahead,this.classAliases.behind,this.classAliases.beyond]),o(h,this.classAliases.current);else{var p=u>0,d=u<0,f=Math.abs(u)>n;r(h,this.classAliases.current),c(h,this.classAliases.beyond,f),c(h,this.classAliases.behind,d),c(h,this.classAliases.ahead,p)}this.options.handleZIndex&&a(h,"z-index",s-Math.abs(u))}return this.emit("slide:after",this.currentIndex,t,e),this.currentIndex=t,this.children[t]},e.prototype.inc=function(t){return this.slide(this.currentIndex+t)},e.prototype.toggleClass=function(t,e){this.element&&c(this.element,this.options.classPrefix+t,e)},e.prototype.prepareClassNames=function(t,e){for(var n in void 0===t&&(t=this.options.classPrefix),void 0===e&&(e=this.options.classAliases),e)Object.prototype.hasOwnProperty.call(e,n)&&(this.classAliases[n]=t+e[n])},e.prototype.wrapIndex=function(t){var e=this.children.length-1;return this.options.wrap?function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0);var i=(n=Math.max(e,n))+1-e;return e+((t-e)%i+i)%i}(t,0,e):function(t,e,n){return Math.max(e,Math.min(n,t))}(t,0,e)},e}(i),d=function(){function t(t,e){var n=this;this.options={},this.instance=t,this.instance.on("init",this.onInit),this.instance.on("destroy",this.onDestroy),window.setTimeout(function(){n.applyOptions(e)},1)}return t.prototype.applyOptions=function(t){l(this.options,this.defaults,t),this.onInit()},t}(),f=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaults={cancelOnSlide:!0,classAlias:"autoplaying",direction:1,instant:!0,interval:3e3},e.cancelAutoplay=!0,e.intervalId=0,e.handleAutoplay=function(){e.cancelAutoplay=!1,e.instance.inc(e.options.direction)},e.handleSlideChange=function(){e.cancelAutoplay&&!1!==e.options.cancelOnSlide&&e.pause(),e.cancelAutoplay=!0},e}return f(e,t),e.prototype.play=function(t){this.pause(!1),this.intervalId=window.setInterval(this.handleAutoplay,this.options.interval),this.options.classAlias&&this.instance.toggleClass(this.options.classAlias,!0),!1!==t&&this.instance.emit("autoplay:start")},e.prototype.pause=function(t){0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=0,this.options.classAlias&&this.instance.toggleClass(this.options.classAlias,!1),!1!==t&&this.instance.emit("autoplay:pause"))},e.prototype.onInit=function(){this.instance.on("slide:after",this.handleSlideChange),!0===this.options.instant&&this.play()},e.prototype.onDestroy=function(){this.instance.off("slide:after",this.handleSlideChange),this.pause(!1)},e}(d),y=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.getFromEvent=function(e,n){void 0===n&&(n=0);var i=new t;return e instanceof TouchEvent&&e.touches?(i.x=e.touches[n].pageX,i.y=e.touches[n].pageY):e instanceof MouseEvent&&(i.x=e.pageX,i.y=e.pageY),i},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t}(),m=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaults={classAlias:"touching",preventDefault:!1,tolerance:30,vertical:!1},e.touchStart=void 0,e.touchLast=void 0,e.touchDelta=void 0,e.target=void 0,e.cancelTouch=function(t){e.options.classAlias&&e.instance.toggleClass(e.options.classAlias,!1),!1!==t&&e.instance.emit("touch:cancel",e.target,e.touchLast),e.touchStart=void 0,e.touchLast=void 0,e.target=void 0},e.handleTouchStart=function(t){var n=y.getFromEvent(t);!e.touchStart&&function(t,e){return t&&e.x>=t.offsetLeft&&e.x<=t.offsetLeft+t.offsetWidth&&e.y>=t.offsetTop&&e.y<=t.offsetTop+t.offsetHeight}(e.instance.element,n)&&(e.touchStart=n,e.touchLast=n,e.target=e.instance.element,e.options.preventDefault&&t.preventDefault(),e.options.classAlias&&e.instance.toggleClass(e.options.classAlias,!0),e.instance.emit("touch:start",e.target,n))},e.handleTouchMove=function(t){if(e.touchStart){e.touchLast=y.getFromEvent(t),e.touchDelta=e.touchStart.clone().sub(e.touchLast),e.instance.emit("touch:move",e.target,e.touchDelta,e.cancelTouch);var n=Math.abs(e.touchDelta.x),i=Math.abs(e.touchDelta.y),s=0;n>i&&!e.options.vertical?s=e.touchDelta.x:n<i&&e.options.vertical&&(s=e.touchDelta.y),s>e.options.tolerance?(e.instance.emit("swipe:next",e.target,e.touchDelta),e.instance.inc(1),e.cancelTouch(!1)):s<-e.options.tolerance&&(e.instance.emit("swipe:prev",e.target,e.touchDelta),e.instance.inc(-1),e.cancelTouch(!1))}},e.handleTouchEnd=function(t){e.touchStart&&(e.instance.emit("touch:end",e.target,e.touchLast),e.cancelTouch(!1))},e}return m(e,t),e.prototype.onInit=function(){this.cancelTouch(!1),document.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),document.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),document.addEventListener("touchend",this.handleTouchEnd,{passive:!1}),document.addEventListener("mousedown",this.handleTouchStart,{passive:!1}),document.addEventListener("mousemove",this.handleTouchMove,{passive:!1}),document.addEventListener("mouseup",this.handleTouchEnd,{passive:!1})},e.prototype.onDestroy=function(){this.cancelTouch(!1),document.removeEventListener("touchstart",this.handleTouchStart),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("mousedown",this.handleTouchStart),document.removeEventListener("mousemove",this.handleTouchMove),document.removeEventListener("mouseup",this.handleTouchEnd)},e}(d);window.ViewMatrix=p,window.ViewMatrixAutoplay=v,window.ViewMatrixTouchSwipe=g}]);
//# sourceMappingURL=viewmatrix.min.js.map